(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{182:function(e,t,a){},183:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){"use strict";a.r(t);var c,n=a(0),r=a.n(n),i=a(31),s=a.n(i),o=a(77),l=a(166),d=a(349),j=a(83),u=a(64),b=a(16),h=a(21),O=a(12),m=a.n(O),x=a(20);!function(e){e.LOAD_WEATHER="Unable to load data. Try again later!",e.LOAD_ONE="Unable to load new city weather. Try again later!",e.UPDATE_ONE="Unable to update weather. Try again later!",e.LOAD_FORECAST="Unable to load forecast. Try again later!",e.NONE=""}(c||(c={}));var p="https://api.openweathermap.org",f="d6d9c485714f90369cdc05f2809bd27a";function v(e){return new Promise((function(t){setTimeout(t,e)}))}var w=function(){var e=Object(x.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(500);case 2:return a="".concat(p,"/data/2.5/weather?id=").concat(t,"&appid=").concat(f,"&units=metric"),e.abrupt("return",fetch(a).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(x.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(500);case 2:return a="".concat(p,"/data/2.5/forecast?id=").concat(t,"&appid=").concat(f,"&units=metric"),e.abrupt("return",fetch(a).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={weathers:[],loading:!1,error:c.NONE},y=localStorage.getItem("citiesIds"),N=y?JSON.parse(y):[],A=Object(u.b)("weathers/fetch",Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(N.map((function(e){return w("".concat(e))}))));case 1:case"end":return e.stop()}}),e)})))),S=Object(u.b)("weather/fetch",(function(e){return w(e)})),C=Object(u.b)("weather/fetchUpdate",function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(u.c)({name:"weathers",initialState:g,reducers:{set:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{weathers:t.payload})},delete:function(e,t){var a=e.weathers.filter((function(e){return e.id!==t.payload})),c=a.map((function(e){return e.id}));return localStorage.setItem("citiesIds",JSON.stringify(c)),Object(h.a)(Object(h.a)({},e),{},{weathers:a})},setError:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{error:t.payload})}},extraReducers:function(e){e.addCase(A.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),e.addCase(A.fulfilled,(function(e,t){var a;return 0===N.length||200===(null===(a=t.payload[0])||void 0===a?void 0:a.cod)?Object(h.a)(Object(h.a)({},e),{},{weathers:t.payload,loading:!1}):{error:c.LOAD_WEATHER,weathers:[],loading:!1}})),e.addCase(A.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{error:c.LOAD_WEATHER,loading:!1})})),e.addCase(S.pending,(function(e){return Object(h.a)(Object(h.a)({},e),{},{loading:!0})})),e.addCase(S.fulfilled,(function(e,t){var a;if(200===(null===(a=t.payload)||void 0===a?void 0:a.cod)){var n=e.weathers.map((function(e){return e.id}));return localStorage.setItem("citiesIds",JSON.stringify([].concat(Object(b.a)(n),[t.payload.id]))),Object(h.a)(Object(h.a)({},e),{},{weathers:[].concat(Object(b.a)(e.weathers),[t.payload]),loading:!1})}return{error:c.LOAD_ONE,weathers:Object(b.a)(e.weathers),loading:!1}})),e.addCase(S.rejected,(function(e){return Object(h.a)(Object(h.a)({},e),{},{error:c.LOAD_ONE,loading:!1})})),e.addCase(C.fulfilled,(function(e,t){return Object(h.a)(Object(h.a)({},e),{},{weathers:e.weathers.map((function(e){return e.id===t.payload.id?t.payload:e}))})}))}}),k=E.reducer,U=E.actions,D=Object(u.a)({reducer:{weathers:k}}),T=a(7),I=a(350),L=a(348),W=(a(182),j.b),P=j.c,R=a(360),F=a(9),H=a(356),J=a(352),M=a(346),B=a(351),z=a(355),K=[{id:702550,name:"Lviv",state:"",country:"UA",coord:{lon:24.023239,lat:49.838261}},{id:707471,name:"Ivano-Frankivsk",state:"",country:"UA",coord:{lon:24.709721,lat:48.921501}},{id:703448,name:"Kyiv",state:"",country:"UA",coord:{lon:30.516666,lat:50.433334}},{id:687700,name:"Zaporizhia",state:"",country:"UA",coord:{lon:35.183331,lat:47.816669}},{id:691650,name:"Ternopil",state:"",country:"UA",coord:{lon:25.60556,lat:49.555889}},{id:698740,name:"Odessa",state:"",country:"UA",coord:{lon:30.732622,lat:46.477474}},{id:710735,name:"Chernihiv",state:"",country:"UA",coord:{lon:31.28488,lat:51.505508}},{id:706483,name:"Kharkiv",state:"",country:"UA",coord:{lon:36.25,lat:50}},{id:696643,name:"Poltava",state:"",country:"UA",coord:{lon:34.54073,lat:49.593731}}],Z=(a(183),a(1)),q=function(){var e=W(),t=Object(n.useState)(""),a=Object(F.a)(t,2),c=a[0],r=a[1],i=localStorage.getItem("citiesIds"),s=(i?JSON.parse(i):[]).includes(c);return Object(Z.jsxs)("div",{className:"main-select",children:[Object(Z.jsxs)(H.a,{fullWidth:!0,children:[Object(Z.jsx)(J.a,{id:"demo-simple-select-label",children:"Select City"}),Object(Z.jsx)(M.a,{sx:{backgroundColor:"white"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:c,label:"Select City",onChange:function(e){r(e.target.value)},children:K.map((function(e){return Object(Z.jsx)(B.a,{value:e.id,children:e.name},e.name)}))})]}),Object(Z.jsx)(z.a,{className:"main-select__button",variant:"contained",onClick:function(){r(""),c&&e(S(c))},disabled:s,children:s?"Added yet":"Add to selected"})]})},G=a(358),V=a(359),Q=a(361),X=a(345),Y=a(153),$=a.n(Y),ee=a(357),te=(a(190),function(e){var t=e.card;return Object(Z.jsx)("div",{className:t?"loader loader--card":"loader",children:Object(Z.jsx)(ee.a,{sx:{margin:"auto"}})})}),ae=(a(191),function(e){var t=e.weather,a=Object(n.useState)(!1),r=Object(F.a)(a,2),i=r[0],s=r[1],l=t.name,d=t.dt,j=t.id,u=t.sys.country,b=t.main,h=b.temp,O=b.temp_min,p=b.temp_max,f=Object(F.a)(t.weather,1)[0],v=f.main,w=f.icon,_=W(),g=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s(!0),e.next=4,_(C("".concat(j)));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),_(U.setError(c.UPDATE_ONE));case 9:return e.prev=9,s(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})));return function(){return e.apply(this,arguments)}}();return Object(Z.jsxs)(G.a,{className:"weather-card",children:[i&&Object(Z.jsx)(te,{card:!0}),Object(Z.jsxs)(V.a,{children:[Object(Z.jsxs)("div",{className:"weather-card__row",children:[Object(Z.jsx)(R.a,{variant:"h5",children:"".concat(l,", ").concat(u)}),Object(Z.jsx)(Q.a,{onClick:function(){_(U.delete(j))},children:Object(Z.jsx)(X.a,{titleAccess:"delete"})})]}),Object(Z.jsxs)("div",{className:"weather-card__row",children:[Object(Z.jsx)(R.a,{variant:"h4",children:v}),Object(Z.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(w,"@2x.png"),alt:"weather icon"}),Object(Z.jsxs)("div",{className:"weather-card__info",children:[Object(Z.jsx)(R.a,{variant:"subtitle2",children:"Max: ".concat(p,"\xb0C")}),Object(Z.jsx)(R.a,{variant:"subtitle2",children:"Min: ".concat(O,"\xb0C")}),Object(Z.jsx)(R.a,{variant:"h6",children:"".concat(h,"\xb0C")})]})]}),Object(Z.jsxs)("div",{className:"weather-card__row",children:[Object(Z.jsx)(z.a,{className:"weather-card__button",children:Object(Z.jsx)(o.b,{to:"/".concat(j),className:"weather-card__link",children:"Details"})}),Object(Z.jsx)(R.a,{variant:"subtitle1",children:new Date(1e3*d).toUTCString()}),Object(Z.jsx)(Q.a,{onClick:g,children:Object(Z.jsx)($.a,{titleAccess:"update"})})]})]})]})}),ce=(a(192),function(){var e=P((function(e){return e.weathers})).weathers;return Object(Z.jsx)("div",{className:"weathers-list",children:e.length>0?e.map((function(e){return Object(Z.jsx)(ae,{weather:e},e.name)})):Object(Z.jsx)(R.a,{variant:"h5",color:"primary",className:"weathers-list__not-found",children:"Please, add cities"})})}),ne=function(){return Object(Z.jsxs)("div",{className:"container",children:[Object(Z.jsx)(R.a,{variant:"h2",align:"center",color:"primary",children:"Weather app"}),Object(Z.jsx)(q,{}),Object(Z.jsx)(ce,{})]})},re=a(362),ie=a(165),se=a.n(ie),oe=a(158),le=a.n(oe),de=a(160),je=a.n(de),ue=a(155),be=a.n(ue),he=a(161),Oe=a.n(he),me=a(159),xe=a.n(me),pe=a(157),fe=a.n(pe),ve=a(162),we=a.n(ve),_e=a(156),ge=a.n(_e),ye=a(163),Ne=a.n(ye),Ae=a(164),Se=a.n(Ae),Ce=(a(193),a(154)),Ee=function(e){var t=e.cityId,a=W(),r=Object(n.useState)(),i=Object(F.a)(r,2),s=i[0],o=i[1],l=Object(n.useState)([]),d=Object(F.a)(l,2),j=d[0],u=d[1],b=Object(n.useState)(!1),h=Object(F.a)(b,2),O=h[0],p=h[1],f={weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},v=function(){var e=Object(x.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),e.next=4,_("".concat(t));case 4:n=e.sent,o((r=n,r.list.filter((function(e){var t=new Date,a=new Date;a.setDate(a.getDate()+1);var c=a.toISOString().slice(0,10),n=t.toISOString().slice(0,10);return e.dt_txt.includes(c)||e.dt_txt.includes(n)}))).map((function(e){return e.main.temp}))),u(n.list.map((function(e){return new Date(1e3*e.dt).toLocaleString("en-US",f)}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(U.setError(c.LOAD_FORECAST));case 12:return e.prev=12,p(!1),e.finish(12);case 15:case"end":return e.stop()}var r}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),w={labels:Array.from(Array(null===s||void 0===s?void 0:s.length),(function(e,t){return j[t]})),datasets:[{label:"Temperature,\xb0C",data:s,backgroundColor:"rgba(75,192,192,0.2)",borderColor:"rgba(75,192,192,1)",borderWidth:1}]};return Object(n.useEffect)((function(){v()}),[]),Object(Z.jsxs)(re.a,{position:"relative",children:[O&&Object(Z.jsx)(te,{card:!0}),Object(Z.jsx)(R.a,{variant:"h5",width:"100%",align:"center",children:"Forecast for today and tomorrow"}),Object(Z.jsx)(Ce.Bar,{data:w,options:{scales:{y:{beginAtZero:!0}}}})]})},ke=function(e){var t,a=e.currentWeather,c=a.coord,n=c.lon,r=c.lat,i=Object(F.a)(a.weather,1)[0],s=i.main,o=i.description,l=i.icon,d=a.main,j=d.temp,u=d.feels_like,b=d.temp_min,h=d.temp_max,O=d.pressure,m=d.humidity,x=d.sea_level,p=d.grnd_level,f=a.visibility,v=a.wind.speed,w=a.rain,_=(w=void 0===w?{}:w)["1h"],g=a.clouds.all,y=a.dt,N=a.sys,A=N.country,S=N.sunrise,C=N.sunset,E=a.name,k=function(e){var t=new Date(1e3*e),a=t.getUTCHours(),c=t.getUTCMinutes(),n=t.getUTCSeconds();return"".concat(a.toString().padStart(2,"0"),":").concat(c.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))};return Object(Z.jsxs)("div",{className:"details",children:[Object(Z.jsxs)("div",{className:"details__row",children:[Object(Z.jsx)(R.a,{children:(t=y,new Date(1e3*t).toUTCString())}),Object(Z.jsx)(R.a,{children:"".concat(r,"\xb0N, ").concat(n,"\xb0E")})]}),Object(Z.jsxs)("div",{className:"details__row",children:[Object(Z.jsx)(R.a,{variant:"h4",children:E}),Object(Z.jsx)(R.a,{variant:"h4",children:A})]}),Object(Z.jsxs)("div",{className:"details__row",children:[Object(Z.jsxs)("div",{className:"details__info",children:[Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(be.a,{titleAccess:"Humidity"}),Object(Z.jsx)(R.a,{children:"".concat(m,"%")})]}),_&&Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(ge.a,{titleAccess:"Rain volume"}),Object(Z.jsx)(R.a,{children:"".concat(_,"mm")})]}),Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(fe.a,{titleAccess:"Pressure"}),Object(Z.jsx)(R.a,{children:"".concat(O,"hPa")})]}),Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(le.a,{titleAccess:"Wind"}),Object(Z.jsx)(R.a,{children:"".concat(v,"m/s")})]}),Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(xe.a,{titleAccess:"Cloudiness"}),Object(Z.jsx)(R.a,{children:"".concat(g,"%")})]}),Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(je.a,{titleAccess:"Visibility"}),Object(Z.jsx)(R.a,{children:"".concat(f,"m")})]}),x&&Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(Oe.a,{titleAccess:"Sea level"}),Object(Z.jsx)(R.a,{children:"".concat(x,"m")})]}),p&&Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(we.a,{titleAccess:"Ground level"}),Object(Z.jsx)(R.a,{children:"".concat(p,"m")})]}),Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(Ne.a,{titleAccess:"Sunrise"}),Object(Z.jsx)(R.a,{children:"".concat(k(S))})]}),Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)(Se.a,{titleAccess:"Sunset"}),Object(Z.jsx)(R.a,{children:"".concat(k(C))})]})]}),Object(Z.jsxs)("div",{className:"details__item",children:[Object(Z.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(l,"@2x.png"),alt:"weather icon"}),Object(Z.jsxs)("div",{className:"details__info",children:[Object(Z.jsx)(R.a,{variant:"h4",children:s}),Object(Z.jsx)(R.a,{children:o}),Object(Z.jsx)(R.a,{variant:"h4",children:"".concat(j,"\xb0C")})]})]}),Object(Z.jsxs)("div",{className:"details__info",children:[Object(Z.jsx)(R.a,{children:"Feels like: ".concat(u,"\xb0C")}),Object(Z.jsx)(R.a,{children:"Max: ".concat(h,"\xb0C")}),Object(Z.jsx)(R.a,{children:"Min: ".concat(b,"\xb0C")})]})]}),Object(Z.jsx)(Ee,{cityId:a.id})]})},Ue=function(){var e=Object(T.q)().cityId,t=void 0===e?"":e,a=Object(T.o)(),c=P((function(e){return e.weathers})).weathers.find((function(e){return"".concat(e.id)===t}));return Object(Z.jsxs)("div",{className:"container",children:[Object(Z.jsxs)(re.a,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"20px"},children:[Object(Z.jsx)(Q.a,{onClick:function(){return a(-1)},children:Object(Z.jsx)(se.a,{titleAccess:"Turn back"})}),Object(Z.jsx)(R.a,{variant:"h4",color:"primary",children:"Weather details"})]}),c&&Object(Z.jsx)(ke,{currentWeather:c})]})},De=function(){return Object(Z.jsx)("div",{className:"container",children:Object(Z.jsx)(R.a,{variant:"h2",width:"100%",align:"center",color:"primary",children:"Page not found"})})},Te=function(){var e=P((function(e){return e.weathers})),t=e.loading,a=e.error,r=W();return Object(n.useEffect)((function(){r(A())}),[]),Object(Z.jsxs)(Z.Fragment,{children:[t&&Object(Z.jsx)(te,{}),Object(Z.jsx)("section",{className:"app",children:Object(Z.jsxs)(T.d,{children:[Object(Z.jsx)(T.b,{path:"*",element:Object(Z.jsx)(De,{})}),Object(Z.jsx)(T.b,{path:"home",element:Object(Z.jsx)(T.a,{to:"/",replace:!0})}),Object(Z.jsx)(T.b,{index:!0,element:Object(Z.jsx)(ne,{})}),Object(Z.jsx)(T.b,{path:"/:cityId",element:Object(Z.jsx)(Ue,{})})]})}),Object(Z.jsx)(I.a,{open:a!==c.NONE,autoHideDuration:5e3,onClose:function(){return r(U.setError(c.NONE))},anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(Z.jsx)(L.a,{severity:"error",children:a})})]})},Ie=(a(288),Object(l.a)({palette:{primary:{main:"#41B3A3"},secondary:{main:"#E27D60"}}}));s.a.render(Object(Z.jsx)(j.a,{store:D,children:Object(Z.jsx)(r.a.StrictMode,{children:Object(Z.jsx)(d.a,{theme:Ie,children:Object(Z.jsx)(o.a,{children:Object(Z.jsx)(Te,{})})})})}),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.5992e031.chunk.js.map